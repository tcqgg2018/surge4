var tlist = {
1: ["å…ƒæ—¦", "2025-01-01"],
2: ["é™¤å¤•", "2025-01-28"],
3: ["æ˜¥èŠ‚", "2025-01-29"],
4: ["å…ƒå®µ", "2025-02-12"],
5: ["æƒ…äººèŠ‚", "2025-02-14"],
6: ["æ¸…æ˜", "2025-04-04"],
7: ["åŠ³åŠ¨", "2025-05-01"],
8: ["æ¯äº²èŠ‚", "2025-05-11"],
9: ["ç«¯åˆ", "2025-06-01"],
10: ["çˆ¶äº²èŠ‚", "2025-06-15"],
11: ["å¤è‡³", "2025-06-21"],
12: ["ä¸ƒå¤•èŠ‚", "2025-07-31"],
13: ["ä¸­å…ƒèŠ‚", "2025-09-06"],
14: ["ä¸­ç§‹", "2025-10-06"],
15: ["å›½åº†", "2025-10-01"],
16: ["é‡é˜³èŠ‚", "2025-11-01"],
17: ["ä¸‡åœ£èŠ‚", "2025-10-31"],
18: ["å…‰æ£èŠ‚", "2025-11-11"],
19: ["æ„Ÿæ©èŠ‚", "2025-11-27"],
20: ["å†¬è‡³", "2025-12-22"],
21: ["å¹³å®‰å¤œ", "2025-12-24"],
22: ["åœ£è¯èŠ‚", "2025-12-25"],
23: ["å…ƒæ—¦", "2026-01-01"],
24: ["é™¤å¤•", "2026-02-17"],
25: ["æ˜¥èŠ‚", "2026-02-18"],
26: ["å…ƒå®µ", "2026-03-05"],
27: ["æƒ…äººèŠ‚", "2026-02-14"],
28: ["æ¸…æ˜", "2026-04-04"],
29: ["åŠ³åŠ¨", "2026-05-01"],
30: ["æ¯äº²èŠ‚", "2026-05-10"],
31: ["ç«¯åˆ", "2026-05-20"],
32: ["çˆ¶äº²èŠ‚", "2026-06-21"],
33: ["å¤è‡³", "2026-06-21"],
34: ["ä¸ƒå¤•èŠ‚", "2026-08-20"],
35: ["ä¸­å…ƒèŠ‚", "2026-08-27"],
36: ["ä¸­ç§‹", "2026-09-25"],
37: ["å›½åº†", "2026-10-01"],
38: ["é‡é˜³èŠ‚", "2026-10-19"],
39: ["ä¸‡åœ£èŠ‚", "2026-10-31"],
40: ["å…‰æ£èŠ‚", "2026-11-11"],
41: ["æ„Ÿæ©èŠ‚", "2026-11-26"],
42: ["å†¬è‡³", "2026-12-21"],
43: ["å¹³å®‰å¤œ", "2026-12-24"],
44: ["åœ£è¯èŠ‚", "2026-12-25"],
45: ["å…ƒæ—¦", "2027-01-01"],
46: ["é™¤å¤•", "2027-02-06"],
47: ["æ˜¥èŠ‚", "2027-02-07"],
48: ["å…ƒå®µ", "2027-02-22"],
49: ["æƒ…äººèŠ‚", "2027-02-14"],
50: ["æ¸…æ˜", "2027-04-05"],
51: ["åŠ³åŠ¨", "2027-05-01"],
52: ["æ¯äº²èŠ‚", "2027-05-09"],
53: ["ç«¯åˆ", "2027-06-10"],
54: ["çˆ¶äº²èŠ‚", "2027-06-20"],
55: ["å¤è‡³", "2027-06-21"],
56: ["ä¸ƒå¤•èŠ‚", "2027-08-10"],
57: ["ä¸­å…ƒèŠ‚", "2027-08-17"],
58: ["ä¸­ç§‹", "2027-09-15"],
59: ["å›½åº†", "2027-10-01"],
60: ["é‡é˜³èŠ‚", "2027-10-09"],
61: ["ä¸‡åœ£èŠ‚", "2027-10-31"],
62: ["å…‰æ£èŠ‚", "2027-11-11"],
63: ["æ„Ÿæ©èŠ‚", "2027-11-25"],
64: ["å†¬è‡³", "2027-12-22"],
65: ["å¹³å®‰å¤œ", "2027-12-24"],
66: ["åœ£è¯èŠ‚", "2027-12-25"],
67: ["å…ƒæ—¦", "2028-01-01"],
68: ["é™¤å¤•", "2028-01-26"],
69: ["æ˜¥èŠ‚", "2028-01-27"],
70: ["å…ƒå®µ", "2028-02-11"],
71: ["æƒ…äººèŠ‚", "2028-02-14"],
72: ["æ¸…æ˜", "2028-04-04"],
73: ["åŠ³åŠ¨", "2028-05-01"],
74: ["æ¯äº²èŠ‚", "2028-05-14"],
75: ["ç«¯åˆ", "2028-05-31"],
76: ["çˆ¶äº²èŠ‚", "2028-06-18"],
77: ["å¤è‡³", "2028-06-21"],
78: ["ä¸ƒå¤•èŠ‚", "2028-07-30"],
79: ["ä¸­å…ƒèŠ‚", "2028-08-26"],
80: ["ä¸­ç§‹", "2028-10-04"],
81: ["å›½åº†", "2028-10-01"],
82: ["é‡é˜³èŠ‚", "2028-10-28"],
83: ["ä¸‡åœ£èŠ‚", "2028-10-31"],
84: ["å…‰æ£èŠ‚", "2028-11-11"],
85: ["æ„Ÿæ©èŠ‚", "2028-11-23"],
86: ["å†¬è‡³", "2028-12-21"],
87: ["å¹³å®‰å¤œ", "2028-12-24"],
88: ["åœ£è¯èŠ‚", "2028-12-25"],
89: ["å…ƒæ—¦", "2029-01-01"],
90: ["é™¤å¤•", "2029-02-12"],
91: ["æ˜¥èŠ‚", "2029-02-13"],
92: ["å…ƒå®µ", "2029-02-26"],
93: ["æƒ…äººèŠ‚", "2029-02-14"],
94: ["æ¸…æ˜", "2029-04-04"],
95: ["åŠ³åŠ¨", "2029-05-01"],
96: ["æ¯äº²èŠ‚", "2029-05-13"],
97: ["ç«¯åˆ", "2029-05-20"],
98: ["çˆ¶äº²èŠ‚", "2029-06-17"],
99: ["å¤è‡³", "2029-06-21"],
100: ["ä¸ƒå¤•èŠ‚", "2029-08-18"],
101: ["ä¸­å…ƒèŠ‚", "2029-08-24"],
102: ["ä¸­ç§‹", "2029-09-22"],
103: ["å›½åº†", "2029-10-01"]
  
};
let tnow = new Date();
let tnowf =
  tnow.getFullYear() + "-" + (tnow.getMonth() + 1) + "-" + tnow.getDate();

/* è®¡ç®—2ä¸ªæ—¥æœŸç›¸å·®çš„å¤©æ•°ï¼Œä¸åŒ…å«ä»Šå¤©ï¼Œå¦‚ï¼š2016-12-13åˆ°2016-12-15ï¼Œç›¸å·®2å¤©
 * @param startDateString
 * @param endDateString
 * @returns
 */
function dateDiff(startDateString, endDateString) {
  var separator = "-"; //æ—¥æœŸåˆ†éš”ç¬¦
  var startDates = startDateString.split(separator);
  var endDates = endDateString.split(separator);
  var startDate = new Date(startDates[0], startDates[1] - 1, startDates[2]);
  var endDate = new Date(endDates[0], endDates[1] - 1, endDates[2]);
  return parseInt(
    (endDate - startDate) / 1000 / 60 / 60 / 24
  ).toString();
}

//è®¡ç®—è¾“å…¥åºå·å¯¹åº”çš„æ—¶é—´ä¸ç°åœ¨çš„å¤©æ•°é—´éš”
function tnumcount(num) {
  let dnum = num;
  return dateDiff(tnowf, tlist[dnum][1]);
}

//è·å–æœ€æ¥è¿‘çš„æ—¥æœŸ
function now() {
  for (var i = 1; i <= Object.getOwnPropertyNames(tlist).length; i++) {
    if (Number(dateDiff(tnowf, tlist[i.toString()][1])) >= 0) {
      //console.log("æœ€è¿‘çš„æ—¥æœŸæ˜¯:" + tlist[i.toString()][0]);
      //console.log("åˆ—è¡¨é•¿åº¦:" + Object.getOwnPropertyNames(tlist).length);
      //console.log("æ—¶é—´å·®è·:" + Number(dateDiff(tnowf, tlist[i.toString()][1])));
      return i;
    }
  }
}

//å¦‚æœæ˜¯0å¤©ï¼Œå‘é€emoji;
let nowlist = now();
function today(day) {
  let daythis = day;
  if (daythis == "0") {
    datenotice();
    return "ğŸ‰";
  } else {
    return daythis;
  }
}

//æé†’æ—¥å½“å¤©å‘é€é€šçŸ¥
function datenotice() {
  if ($persistentStore.read("timecardpushed") != tlist[nowlist][1] && tnow.getHours() >= 6) {
    $persistentStore.write(tlist[nowlist][1], "timecardpushed");
    $notification.post("å‡æ—¥ç¥ç¦","", "ä»Šå¤©æ˜¯" + tlist[nowlist][1] + "æ—¥ " + tlist[nowlist][0] + "   ğŸ‰")
  } else if ($persistentStore.read("timecardpushed") == tlist[nowlist][1]) {
    //console.log("å½“æ—¥å·²é€šçŸ¥");
  }
}

//>å›¾æ ‡ä¾æ¬¡åˆ‡æ¢ä¹Œé¾Ÿã€å…”å­ã€é—¹é’Ÿã€ç¤¼å“ç›’
function icon_now(num){
  if(num<=7 && num>3 ){
    return "hare.fill"
  }else if(num<=3 && num>0){
    return "alarm.fill"
  }else if(num==0){
    return "gift"
  }else{
    return "tortoise.fill"
  }
}

function icon_color(num){
  if(num<=7 && num>3){
    return '#FFFFFF'
  }else if(num<=3 && num>0){
    return '#3EEDE7'
  }else if(num==0){
    return '#FF0000'
  }else{
    return '#00BC12'
  }
}
$done({
title:title_random(tnumcount(Number(nowlist))),
icon:icon_now(tnumcount(Number(nowlist))),
"icon-color":icon_color(tnumcount(Number(nowlist))),
content:tlist[nowlist][0]+":"+today(tnumcount(nowlist))+"å¤©,"+tlist[Number(nowlist) + Number(1)][0] +":"+ tnumcount(Number(nowlist) + Number(1))+ "å¤©,"+tlist[Number(nowlist) + Number(2)][0]+":"+tnumcount(Number(nowlist) + Number(2))+"å¤©"
})
function title_random(num){
  let r = Math.floor((Math.random()*12)+1);
  let dic = {
    1:"è·ç¦»æ”¾å‡ï¼Œè¿˜è¦æ‘¸é±¼å¤šå°‘å¤©ï¼ŸğŸ¥±",
    2:"åšæŒä½ï¼Œå°±å¿«æ”¾å‡å•¦ï¼ğŸ’ª",
    3:"ä¸Šç­å¥½ç´¯å‘€ï¼Œå¥½æƒ³æ”¾å‡ğŸ˜®â€ğŸ’¨",
    4:"åŠªåŠ›ï¼Œæˆ‘è¿˜èƒ½åŠ ç­24å°æ—¶ï¼ğŸ§",
    5:"å¤©å‘ï¼Œè¿˜è¦å¤šä¹…æ‰æ”¾å‡å‘€ï¼ŸğŸ˜­",
    6:"èººå¹³ä¸­ï¼Œç­‰æ”¾å‡(â˜ Õà¨Š Õ)â˜",
    7:"åªæœ‰æ‘¸é±¼æ‰æ˜¯èµšè€æ¿çš„é’±ğŸ™ğŸ¤³",
    8:"ä¸€èµ·æ‘¸é±¼å§âœŒ(ÕÙ¼Õ )âœŒ",
    9:"æ‘¸é±¼ä¸­ï¼ŒæœŸå¾…ä¸‹ä¸€ä¸ªå‡æ—¥.Ê•Ê˜â€¿Ê˜Ê”.",
    10: "å°ä¹Œé¾Ÿæ…¢æ…¢çˆ¬ğŸ¢",
    11:"å¤ªéš¾äº†ï¼ğŸ˜«ğŸ˜©ğŸ˜–(Â´â—‰â€¿â—‰)",
    12:"åæ­£æ”¾å‡ä¹Ÿä¸èƒ½å»ç©ğŸ˜¤"
  };
  return num==0?"èŠ‚æ—¥å¿«ä¹ğŸ‰ï¼Œä¸‡äº‹å¤§å‰ğŸ¥³":dic[r]
}
